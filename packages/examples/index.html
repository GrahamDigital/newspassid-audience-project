<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NewsPassID Basic Example</title>

    <!-- Google Ad Manager -->
    <script
      async
      src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"
    ></script>
    <script>
      window.googletag = window.googletag || { cmd: [] };
      // get newspassid cookie
      const newspassid = document.cookie
        .split("; ")
        .find((row) => row.startsWith("newspassid="))
        ?.split("=")[1];

      console.log("[newspassid] cookie", newspassid);

      googletag.cmd.push(function () {
        // Define ad slots
        googletag
          .defineSlot(
            "/6355419/Travel/Europe/France/Paris",
            [300, 250],
            "div-gpt-ad-1682372512510-0",
          )
          .addService(googletag.pubads());

        // set ppid
        googletag.pubads().setPublisherProvidedId(newspassid);

        // Enable services
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
      });
    </script>

    <!-- Other head elements -->
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 20px;
        max-width: 800px;
        margin: 0 auto;
      }

      .container {
        border: 1px solid #ddd;
        padding: 20px;
        margin-top: 20px;
        border-radius: 4px;
      }

      button {
        background: #4caf50;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
        margin-right: 10px;
      }

      button:hover {
        background: #45a049;
      }

      pre {
        background: #f5f5f5;
        padding: 10px;
        border-radius: 4px;
        overflow-x: auto;
      }

      h1,
      h2 {
        color: #333;
      }

      .status {
        margin-top: 20px;
        padding: 10px;
        background: #e8f5e9;
        border-radius: 4px;
      }

      .ad-container {
        margin: 20px 0;
        padding: 10px;
        background: #f9f9f9;
        border: 1px solid #ddd;
        border-radius: 4px;
        text-align: center;
      }

      .ad-wrapper {
        width: 300px;
        height: 250px;
        margin: 0 auto;
        background: #fff;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 10px;
      }
    </style>
  </head>

  <body>
    <h1>NewsPassID Basic Example</h1>
    <p>This example demonstrates the basic functionality of NewsPassID.</p>
    <div class="container">
      <h2>Current Status</h2>
      <div class="status" id="status">Loading NewsPassID...</div>

      <h2>Controls</h2>
      <div>
        <button id="get-id">Get Current ID</button>
        <button id="get-segments">Get Segments</button>
        <button id="clear-id">Clear ID</button>
        <button id="manual-set-id">Set New ID</button>
      </div>

      <h2>Results</h2>
      <pre id="results">No data yet.</pre>
    </div>

    <!-- Display Ad -->
    <div class="ad-container">
      <h3>Display Ad (300x250)</h3>
      <div id="div-gpt-ad-1682372512510-0" class="ad-wrapper">
        <script>
          googletag.cmd.push(function () {
            googletag.display("div-gpt-ad-1682372512510-0");
          });
        </script>
      </div>
    </div>

    <script type="module" src="./src/main.ts"></script>
  </body>
</html>
